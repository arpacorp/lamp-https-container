# lamp-https-container

# Introduction
This Docker container implements a working LAMP stack with Let's Encrypt for TLS certificate provisioning. This package includes the following components:

- Ubuntu 20.04 LTS Focal base image.
- Apache HTTP Server 2.4
- MySQL 5.7
- PhpMyAdmin
- PHP 5.6
- TRAEFIK for letsencrypt and SSL

# Requirements
- Server with public IP (required to have a valid SSL certificate )
- Domain name (required to have a valid SSL certificate )
- Docker
- docker-compose

# Installation

## Environment variables

This docker-compose uses environment variables .env to allow the configuration of some parameteres at run time:

MYSQL_ROOT_PASSWORD=''"
MYSQL_DATABASE=''"
MYSQL_USER=''"
MYSQL_PASSWORD=''"
DOMAIN=""

The parameters above should be stored in .env file.

## Exposed port and volumes
The image exposes ports TCP `80` and `443` for web traffic, and exports three volumes. The website must be placed on the directory ./website:

- `./website:/var/www/website`, contains the website files inside the web container.
- `/var/lib/mysql`, contains the MySQL data files on the database container.
- `/letsencrypt`, contains the TLS certificates generated by Traefik which acts as the proxy.

## Networks
An external network on docker must be created which will be used to expose Traefik service to the public network in provisioning and renewal of the TLS certificate.

	docker network create frontend

## usage
Inside the docker-composer.yml, change XXXX-XXXX-XXXX-XXXX by your domain and run:

	docker-compose up -d --build 

